{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/admin-header.tsx"],"sourcesContent":["/*\n * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git\n * @Date: 2026-01-27 21:04:56\n * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git\n * @LastEditTime: 2026-01-27 21:05:04\n * @FilePath: /blog/my-next-app/components/admin-header.tsx\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n\"use client\"\n\nimport Link from \"next/link\"\nimport { useRouter } from \"next/navigation\"\nimport { Button } from \"@/components/ui/button\"\n\nexport function AdminHeader() {\n  const router = useRouter()\n\n  async function handleLogout() {\n    await fetch(\"/api/auth/logout\", { method: \"POST\" })\n    router.push(\"/\")\n    router.refresh()\n  }\n\n  return (\n    <header className=\"sticky top-0 z-50 w-full border-b border-border bg-background\">\n      <div className=\"mx-auto flex h-16 max-w-6xl items-center justify-between px-4\">\n        <div className=\"flex items-center gap-6\">\n          <Link href=\"/admin\" className=\"flex items-center gap-2\">\n            <div className=\"flex h-8 w-8 items-center justify-center rounded-lg bg-foreground text-background\">\n              <span className=\"text-sm font-bold\">B</span>\n            </div>\n            <span className=\"text-lg font-semibold\">管理后台</span>\n          </Link>\n          \n          <nav className=\"flex items-center gap-1\">\n            <Link\n              href=\"/admin\"\n              className=\"px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\"\n            >\n              文章管理\n            </Link>\n            <Link\n              href=\"/admin/categories\"\n              className=\"px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\"\n            >\n              分类管理\n            </Link>\n            <Link\n              href=\"/\"\n              className=\"px-3 py-2 text-sm font-medium text-muted-foreground hover:text-foreground transition-colors\"\n            >\n              查看博客\n            </Link>\n          </nav>\n        </div>\n\n        <Button variant=\"outline\" size=\"sm\" onClick={handleLogout}>\n          退出登录\n        </Button>\n      </div>\n    </header>\n  )\n}\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;AAGD;AACA;AACA;;;AAJA;;;;AAMO,SAAS;;IACd,MAAM,SAAS,IAAA,kRAAS;IAExB,eAAe;QACb,MAAM,MAAM,oBAAoB;YAAE,QAAQ;QAAO;QACjD,OAAO,IAAI,CAAC;QACZ,OAAO,OAAO;IAChB;IAEA,qBACE,6TAAC;QAAO,WAAU;kBAChB,cAAA,6TAAC;YAAI,WAAU;;8BACb,6TAAC;oBAAI,WAAU;;sCACb,6TAAC,0SAAI;4BAAC,MAAK;4BAAS,WAAU;;8CAC5B,6TAAC;oCAAI,WAAU;8CACb,cAAA,6TAAC;wCAAK,WAAU;kDAAoB;;;;;;;;;;;8CAEtC,6TAAC;oCAAK,WAAU;8CAAwB;;;;;;;;;;;;sCAG1C,6TAAC;4BAAI,WAAU;;8CACb,6TAAC,0SAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6TAAC,0SAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;8CAGD,6TAAC,0SAAI;oCACH,MAAK;oCACL,WAAU;8CACX;;;;;;;;;;;;;;;;;;8BAML,6TAAC,+IAAM;oBAAC,SAAQ;oBAAU,MAAK;oBAAK,SAAS;8BAAc;;;;;;;;;;;;;;;;;AAMnE;GAhDgB;;QACC,kRAAS;;;KADV"}},
    {"offset": {"line": 155, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/admin-auth-wrapper.tsx"],"sourcesContent":["\"use client\"\n\nimport { useEffect } from \"react\"\nimport { useRouter } from \"next/navigation\"\n\ninterface AdminAuthWrapperProps {\n  children: React.ReactNode\n}\n\nexport function AdminAuthWrapper({ children }: AdminAuthWrapperProps) {\n  const router = useRouter()\n\n  useEffect(() => {\n    // 检查是否有 token\n    const token = localStorage.getItem('auth_token')\n\n    if (!token) {\n      // 没有 token，重定向到登录页\n      router.push('/blog/login')\n      return\n    }\n\n    // 验证 token 是否有效\n    fetch('/api/auth/verify', {\n      headers: {\n        Authorization: `Bearer ${token}`\n      }\n    })\n      .then(res => {\n        if (!res.ok) {\n          throw new Error('Invalid token')\n        }\n        return res.json()\n      })\n      .catch(() => {\n        // token 无效，重定向到登录页\n        localStorage.removeItem('auth_token')\n        router.push('/blog/login')\n      })\n  }, [router])\n\n  return <>{children}</>\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;;;AAHA;;;AASO,SAAS,iBAAiB,EAAE,QAAQ,EAAyB;;IAClE,MAAM,SAAS,IAAA,kRAAS;IAExB,IAAA,0SAAS;sCAAC;YACR,cAAc;YACd,MAAM,QAAQ,aAAa,OAAO,CAAC;YAEnC,IAAI,CAAC,OAAO;gBACV,mBAAmB;gBACnB,OAAO,IAAI,CAAC;gBACZ;YACF;YAEA,gBAAgB;YAChB,MAAM,oBAAoB;gBACxB,SAAS;oBACP,eAAe,CAAC,OAAO,EAAE,OAAO;gBAClC;YACF,GACG,IAAI;8CAAC,CAAA;oBACJ,IAAI,CAAC,IAAI,EAAE,EAAE;wBACX,MAAM,IAAI,MAAM;oBAClB;oBACA,OAAO,IAAI,IAAI;gBACjB;6CACC,KAAK;8CAAC;oBACL,mBAAmB;oBACnB,aAAa,UAAU,CAAC;oBACxB,OAAO,IAAI,CAAC;gBACd;;QACJ;qCAAG;QAAC;KAAO;IAEX,qBAAO;kBAAG;;AACZ;GAjCgB;;QACC,kRAAS;;;KADV"}}]
}