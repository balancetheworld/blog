{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 4, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/markdown-renderer.tsx"],"sourcesContent":["\"use client\"\n\nimport ReactMarkdown from \"react-markdown\"\nimport remarkGfm from \"remark-gfm\"\nimport { Prism as SyntaxHighlighter } from \"react-syntax-highlighter\"\nimport { oneDark } from \"react-syntax-highlighter/dist/esm/styles/prism\"\n\ninterface MarkdownRendererProps {\n  content: string\n}\n\nexport function MarkdownRenderer({ content }: MarkdownRendererProps) {\n  return (\n    <div className=\"prose prose-neutral dark:prose-invert max-w-none\">\n      <ReactMarkdown\n        remarkPlugins={[remarkGfm]}\n        components={{\n          code({ className, children, ...props }) {\n            const match = /language-(\\w+)/.exec(className || \"\")\n            const isInline = !match && !className\n            \n            if (isInline) {\n              return (\n                <code\n                  className=\"rounded bg-muted px-1.5 py-0.5 text-sm font-mono text-foreground\"\n                  {...props}\n                >\n                  {children}\n                </code>\n              )\n            }\n            \n            return (\n              <SyntaxHighlighter\n                style={oneDark}\n                language={match ? match[1] : \"text\"}\n                PreTag=\"div\"\n                className=\"rounded-lg !bg-[#1e1e1e] !my-4\"\n              >\n                {String(children).replace(/\\n$/, \"\")}\n              </SyntaxHighlighter>\n            )\n          },\n          h1: ({ children }) => (\n            <h1 className=\"text-3xl font-bold tracking-tight mt-8 mb-4 first:mt-0\">\n              {children}\n            </h1>\n          ),\n          h2: ({ children }) => (\n            <h2 className=\"text-2xl font-semibold tracking-tight mt-8 mb-3 border-b border-border pb-2\">\n              {children}\n            </h2>\n          ),\n          h3: ({ children }) => (\n            <h3 className=\"text-xl font-semibold tracking-tight mt-6 mb-2\">\n              {children}\n            </h3>\n          ),\n          p: ({ children }) => (\n            <p className=\"leading-7 mb-4\">{children}</p>\n          ),\n          ul: ({ children }) => (\n            <ul className=\"my-4 ml-6 list-disc space-y-2\">{children}</ul>\n          ),\n          ol: ({ children }) => (\n            <ol className=\"my-4 ml-6 list-decimal space-y-2\">{children}</ol>\n          ),\n          li: ({ children }) => (\n            <li className=\"leading-7\">{children}</li>\n          ),\n          blockquote: ({ children }) => (\n            <blockquote className=\"border-l-4 border-foreground/20 pl-4 italic my-4 text-muted-foreground\">\n              {children}\n            </blockquote>\n          ),\n          a: ({ href, children }) => (\n            <a\n              href={href}\n              className=\"text-foreground font-medium underline underline-offset-4 hover:text-foreground/80\"\n              target={href?.startsWith(\"http\") ? \"_blank\" : undefined}\n              rel={href?.startsWith(\"http\") ? \"noopener noreferrer\" : undefined}\n            >\n              {children}\n            </a>\n          ),\n          hr: () => <hr className=\"my-8 border-border\" />,\n          table: ({ children }) => (\n            <div className=\"my-4 overflow-x-auto\">\n              <table className=\"w-full border-collapse border border-border\">\n                {children}\n              </table>\n            </div>\n          ),\n          th: ({ children }) => (\n            <th className=\"border border-border bg-muted px-4 py-2 text-left font-semibold\">\n              {children}\n            </th>\n          ),\n          td: ({ children }) => (\n            <td className=\"border border-border px-4 py-2\">{children}</td>\n          ),\n        }}\n      >\n        {content}\n      </ReactMarkdown>\n    </div>\n  )\n}\n"],"names":[],"mappings":";;;;;AAEA;AACA;AACA;AACA;AALA;;;;;;AAWO,SAAS,iBAAiB,EAAE,OAAO,EAAyB;IACjE,qBACE,6TAAC;QAAI,WAAU;kBACb,cAAA,6TAAC,+TAAa;YACZ,eAAe;gBAAC,qNAAS;aAAC;YAC1B,YAAY;gBACV,MAAK,EAAE,SAAS,EAAE,QAAQ,EAAE,GAAG,OAAO;oBACpC,MAAM,QAAQ,iBAAiB,IAAI,CAAC,aAAa;oBACjD,MAAM,WAAW,CAAC,SAAS,CAAC;oBAE5B,IAAI,UAAU;wBACZ,qBACE,6TAAC;4BACC,WAAU;4BACT,GAAG,KAAK;sCAER;;;;;;oBAGP;oBAEA,qBACE,6TAAC,wTAAiB;wBAChB,OAAO,qVAAO;wBACd,UAAU,QAAQ,KAAK,CAAC,EAAE,GAAG;wBAC7B,QAAO;wBACP,WAAU;kCAET,OAAO,UAAU,OAAO,CAAC,OAAO;;;;;;gBAGvC;gBACA,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCACX;;;;;;gBAGL,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCACX;;;;;;gBAGL,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCACX;;;;;;gBAGL,GAAG,CAAC,EAAE,QAAQ,EAAE,iBACd,6TAAC;wBAAE,WAAU;kCAAkB;;;;;;gBAEjC,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCAAiC;;;;;;gBAEjD,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCAAoC;;;;;;gBAEpD,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCAAa;;;;;;gBAE7B,YAAY,CAAC,EAAE,QAAQ,EAAE,iBACvB,6TAAC;wBAAW,WAAU;kCACnB;;;;;;gBAGL,GAAG,CAAC,EAAE,IAAI,EAAE,QAAQ,EAAE,iBACpB,6TAAC;wBACC,MAAM;wBACN,WAAU;wBACV,QAAQ,MAAM,WAAW,UAAU,WAAW;wBAC9C,KAAK,MAAM,WAAW,UAAU,wBAAwB;kCAEvD;;;;;;gBAGL,IAAI,kBAAM,6TAAC;wBAAG,WAAU;;;;;;gBACxB,OAAO,CAAC,EAAE,QAAQ,EAAE,iBAClB,6TAAC;wBAAI,WAAU;kCACb,cAAA,6TAAC;4BAAM,WAAU;sCACd;;;;;;;;;;;gBAIP,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCACX;;;;;;gBAGL,IAAI,CAAC,EAAE,QAAQ,EAAE,iBACf,6TAAC;wBAAG,WAAU;kCAAkC;;;;;;YAEpD;sBAEC;;;;;;;;;;;AAIT;KAhGgB"}},
    {"offset": {"line": 189, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/lib/utils.ts"],"sourcesContent":["import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n"],"names":[],"mappings":";;;;AAAA;AACA;;;AAEO,SAAS,GAAG,GAAG,MAAoB;IACxC,OAAO,IAAA,uOAAO,EAAC,IAAA,iMAAI,EAAC;AACtB"}},
    {"offset": {"line": 207, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/ui/button.tsx"],"sourcesContent":["import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-primary text-primary-foreground hover:bg-primary/90\",\n        destructive:\n          \"bg-destructive text-destructive-foreground hover:bg-destructive/90\",\n        outline:\n          \"border border-input bg-background hover:bg-accent hover:text-accent-foreground\",\n        secondary:\n          \"bg-secondary text-secondary-foreground hover:bg-secondary/80\",\n        ghost: \"hover:bg-accent hover:text-accent-foreground\",\n        link: \"text-primary underline-offset-4 hover:underline\",\n      },\n      size: {\n        default: \"h-10 px-4 py-2\",\n        sm: \"h-9 rounded-md px-3\",\n        lg: \"h-11 rounded-md px-8\",\n        icon: \"h-10 w-10\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, ...props }, ref) => {\n    return (\n      <button\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n"],"names":[],"mappings":";;;;;;;AAAA;AACA;AAEA;;;;;AAEA,MAAM,iBAAiB,IAAA,qPAAG,EACxB,gSACA;IACE,UAAU;QACR,SAAS;YACP,SAAS;YACT,aACE;YACF,SACE;YACF,WACE;YACF,OAAO;YACP,MAAM;QACR;QACA,MAAM;YACJ,SAAS;YACT,IAAI;YACJ,IAAI;YACJ,MAAM;QACR;IACF;IACA,iBAAiB;QACf,SAAS;QACT,MAAM;IACR;AACF;AASF,MAAM,uBAAS,2SAAgB,MAC7B,CAAC,EAAE,SAAS,EAAE,OAAO,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IACvC,qBACE,6TAAC;QACC,WAAW,IAAA,4HAAE,EAAC,eAAe;YAAE;YAAS;YAAM;QAAU;QACxD,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,OAAO,WAAW,GAAG"}},
    {"offset": {"line": 271, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/like-button.tsx"],"sourcesContent":["/*\n * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git\n * @Date: 2026-01-27 21:07:23\n * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git\n * @LastEditTime: 2026-01-27 21:07:31\n * @FilePath: /blog/my-next-app/components/like-button.tsx\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n\"use client\"\n\nimport { useState, useEffect } from \"react\"\nimport { Button } from \"@/components/ui/button\"\nimport { Heart } from \"lucide-react\"\nimport { cn } from \"@/lib/utils\"\n\ninterface LikeButtonProps {\n  postId: string\n  initialLikes: number\n}\n\nexport function LikeButton({ postId, initialLikes }: LikeButtonProps) {\n  const [likes, setLikes] = useState(initialLikes)\n  const [liked, setLiked] = useState(false)\n  const [isLoading, setIsLoading] = useState(false)\n\n  // 获取或生成 visitor ID\n  const getVisitorId = () => {\n    let visitorId = localStorage.getItem('visitor_id')\n    if (!visitorId) {\n      visitorId = `visitor_${Date.now()}_${Math.random().toString(36).substring(2)}`\n      localStorage.setItem('visitor_id', visitorId)\n    }\n    return visitorId\n  }\n\n  const visitorId = getVisitorId()\n\n  useEffect(() => {\n    // 检查是否已点赞\n    fetch(`/api/posts/${postId}/like?visitorId=${visitorId}`)\n      .then(res => res.json())\n      .then(data => {\n        setLiked(data.liked)\n        setLikes(data.likes)\n      })\n      .catch(console.error)\n  }, [postId, visitorId])\n\n  const handleLike = async () => {\n    if (isLoading) return\n    setIsLoading(true)\n\n    try {\n      const res = await fetch(`/api/posts/${postId}/like`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ visitorId })\n      })\n      const data = await res.json()\n      setLiked(data.liked)\n      setLikes(data.likes)\n    } catch (error) {\n      console.error(\"点赞失败:\", error)\n    } finally {\n      setIsLoading(false)\n    }\n  }\n\n  return (\n    <Button\n      variant=\"outline\"\n      size=\"sm\"\n      onClick={handleLike}\n      disabled={isLoading}\n      className={cn(\n        \"gap-2 transition-all\",\n        liked && \"bg-red-50 border-red-200 text-red-600 hover:bg-red-100 hover:text-red-700\"\n      )}\n    >\n      <Heart \n        className={cn(\n          \"h-4 w-4 transition-all\",\n          liked && \"fill-current\"\n        )} \n      />\n      <span>{likes}</span>\n      <span className=\"sr-only\">点赞</span>\n    </Button>\n  )\n}\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;AAGD;AACA;AACA;AACA;;;AALA;;;;;AAYO,SAAS,WAAW,EAAE,MAAM,EAAE,YAAY,EAAmB;;IAClE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,ySAAQ,EAAC;IACnC,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,ySAAQ,EAAC;IACnC,MAAM,CAAC,WAAW,aAAa,GAAG,IAAA,ySAAQ,EAAC;IAE3C,mBAAmB;IACnB,MAAM,eAAe;QACnB,IAAI,YAAY,aAAa,OAAO,CAAC;QACrC,IAAI,CAAC,WAAW;YACd,YAAY,CAAC,QAAQ,EAAE,KAAK,GAAG,GAAG,CAAC,EAAE,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,SAAS,CAAC,IAAI;YAC9E,aAAa,OAAO,CAAC,cAAc;QACrC;QACA,OAAO;IACT;IAEA,MAAM,YAAY;IAElB,IAAA,0SAAS;gCAAC;YACR,UAAU;YACV,MAAM,CAAC,WAAW,EAAE,OAAO,gBAAgB,EAAE,WAAW,EACrD,IAAI;wCAAC,CAAA,MAAO,IAAI,IAAI;uCACpB,IAAI;wCAAC,CAAA;oBACJ,SAAS,KAAK,KAAK;oBACnB,SAAS,KAAK,KAAK;gBACrB;uCACC,KAAK,CAAC,QAAQ,KAAK;QACxB;+BAAG;QAAC;QAAQ;KAAU;IAEtB,MAAM,aAAa;QACjB,IAAI,WAAW;QACf,aAAa;QAEb,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,WAAW,EAAE,OAAO,KAAK,CAAC,EAAE;gBACnD,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE;gBAAU;YACnC;YACA,MAAM,OAAO,MAAM,IAAI,IAAI;YAC3B,SAAS,KAAK,KAAK;YACnB,SAAS,KAAK,KAAK;QACrB,EAAE,OAAO,OAAO;YACd,QAAQ,KAAK,CAAC,SAAS;QACzB,SAAU;YACR,aAAa;QACf;IACF;IAEA,qBACE,6TAAC,+IAAM;QACL,SAAQ;QACR,MAAK;QACL,SAAS;QACT,UAAU;QACV,WAAW,IAAA,4HAAE,EACX,wBACA,SAAS;;0BAGX,6TAAC,oSAAK;gBACJ,WAAW,IAAA,4HAAE,EACX,0BACA,SAAS;;;;;;0BAGb,6TAAC;0BAAM;;;;;;0BACP,6TAAC;gBAAK,WAAU;0BAAU;;;;;;;;;;;;AAGhC;GArEgB;KAAA"}},
    {"offset": {"line": 394, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/ui/input.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface InputProps\n  extends React.InputHTMLAttributes<HTMLInputElement> {}\n\nconst Input = React.forwardRef<HTMLInputElement, InputProps>(\n  ({ className, type, ...props }, ref) => {\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,sBAAQ,2SAAgB,MAC5B,CAAC,EAAE,SAAS,EAAE,IAAI,EAAE,GAAG,OAAO,EAAE;IAC9B,qBACE,6TAAC;QACC,MAAM;QACN,WAAW,IAAA,4HAAE,EACX,qXACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,MAAM,WAAW,GAAG"}},
    {"offset": {"line": 429, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/ui/textarea.tsx"],"sourcesContent":["import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nexport interface TextareaProps\n  extends React.TextareaHTMLAttributes<HTMLTextAreaElement> {}\n\nconst Textarea = React.forwardRef<HTMLTextAreaElement, TextareaProps>(\n  ({ className, ...props }, ref) => {\n    return (\n      <textarea\n        className={cn(\n          \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n"],"names":[],"mappings":";;;;;AAAA;AAEA;;;;AAKA,MAAM,yBAAW,2SAAgB,MAC/B,CAAC,EAAE,SAAS,EAAE,GAAG,OAAO,EAAE;IACxB,qBACE,6TAAC;QACC,WAAW,IAAA,4HAAE,EACX,wSACA;QAEF,KAAK;QACJ,GAAG,KAAK;;;;;;AAGf;;AAEF,SAAS,WAAW,GAAG"}},
    {"offset": {"line": 463, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/comments-section.tsx"],"sourcesContent":["\"use client\"\n\nimport React from \"react\"\n\nimport { useState } from \"react\"\nimport useSWR, { mutate } from \"swr\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Textarea } from \"@/components/ui/textarea\"\nimport { MessageCircle, Send, User } from \"lucide-react\"\nimport type { Comment } from \"@/lib/store\"\n\ninterface CommentsSectionProps {\n  postId: string\n}\n\nconst fetcher = (url: string) => fetch(url).then(res => res.json())\n\n// 本地格式化函数，支持 number 和 string\nfunction formatDate(date: string | number) {\n  const dateObj = typeof date === 'number' ? new Date(date) : new Date(date)\n  return dateObj.toLocaleDateString('zh-CN', {\n    year: 'numeric',\n    month: 'long',\n    day: 'numeric'\n  })\n}\n\nexport function CommentsSection({ postId }: CommentsSectionProps) {\n  const { data: comments, isLoading } = useSWR<Comment[]>(\n    `/api/comments/post/${postId}`,\n    fetcher\n  )\n  \n  const [author, setAuthor] = useState(\"\")\n  const [content, setContent] = useState(\"\")\n  const [isSubmitting, setIsSubmitting] = useState(false)\n  const [error, setError] = useState(\"\")\n\n  const handleSubmit = async (e: React.FormEvent) => {\n    e.preventDefault()\n    if (!author.trim() || !content.trim()) {\n      setError(\"请填写昵称和评论内容\")\n      return\n    }\n\n    setIsSubmitting(true)\n    setError(\"\")\n\n    try {\n      const res = await fetch(`/api/comments`, {\n        method: \"POST\",\n        headers: { \"Content-Type\": \"application/json\" },\n        body: JSON.stringify({ author: author.trim(), content: content.trim(), postId })\n      })\n\n      if (!res.ok) {\n        const data = await res.json()\n        throw new Error(data.error || \"评论失败\")\n      }\n\n      // 刷新评论列表\n      mutate(`/api/comments/post/${postId}`)\n      setContent(\"\")\n    } catch (err) {\n      setError(err instanceof Error ? err.message : \"评论失败\")\n    } finally {\n      setIsSubmitting(false)\n    }\n  }\n\n  return (\n    <section className=\"mt-12 border-t border-border pt-8\">\n      <div className=\"flex items-center gap-2 mb-6\">\n        <MessageCircle className=\"h-5 w-5 text-foreground\" />\n        <h2 className=\"text-xl font-semibold text-foreground\">\n          评论 ({comments?.length ?? 0})\n        </h2>\n      </div>\n\n      {/* 评论表单 */}\n      <form onSubmit={handleSubmit} className=\"mb-8 space-y-4\">\n        <div className=\"flex gap-4\">\n          <div className=\"flex-shrink-0\">\n            <div className=\"w-10 h-10 rounded-full bg-secondary flex items-center justify-center\">\n              <User className=\"h-5 w-5 text-muted-foreground\" />\n            </div>\n          </div>\n          <div className=\"flex-1 space-y-3\">\n            <Input\n              placeholder=\"你的昵称\"\n              value={author}\n              onChange={(e) => setAuthor(e.target.value)}\n              maxLength={50}\n              className=\"max-w-xs\"\n            />\n            <Textarea\n              placeholder=\"写下你的评论...\"\n              value={content}\n              onChange={(e) => setContent(e.target.value)}\n              maxLength={1000}\n              rows={3}\n              className=\"resize-none\"\n            />\n            {error && (\n              <p className=\"text-sm text-red-500\">{error}</p>\n            )}\n            <Button \n              type=\"submit\" \n              disabled={isSubmitting || !author.trim() || !content.trim()}\n              className=\"gap-2\"\n            >\n              <Send className=\"h-4 w-4\" />\n              {isSubmitting ? \"发送中...\" : \"发送评论\"}\n            </Button>\n          </div>\n        </div>\n      </form>\n\n      {/* 评论列表 */}\n      <div className=\"space-y-6\">\n        {isLoading ? (\n          <div className=\"space-y-4\">\n            {[1, 2].map(i => (\n              <div key={i} className=\"flex gap-4 animate-pulse\">\n                <div className=\"w-10 h-10 rounded-full bg-muted\" />\n                <div className=\"flex-1 space-y-2\">\n                  <div className=\"h-4 bg-muted rounded w-24\" />\n                  <div className=\"h-4 bg-muted rounded w-full\" />\n                  <div className=\"h-4 bg-muted rounded w-3/4\" />\n                </div>\n              </div>\n            ))}\n          </div>\n        ) : comments?.length === 0 ? (\n          <div className=\"text-center py-8 text-muted-foreground\">\n            <MessageCircle className=\"h-12 w-12 mx-auto mb-3 opacity-50\" />\n            <p>暂无评论，来写下第一条评论吧！</p>\n          </div>\n        ) : (\n          comments?.map(comment => (\n            <div key={comment.id} className=\"flex gap-4\">\n              <div className=\"flex-shrink-0\">\n                <div className=\"w-10 h-10 rounded-full bg-secondary flex items-center justify-center\">\n                  <span className=\"text-sm font-medium text-secondary-foreground\">\n                    {comment.author.charAt(0).toUpperCase()}\n                  </span>\n                </div>\n              </div>\n              <div className=\"flex-1\">\n                <div className=\"flex items-center gap-2 mb-1\">\n                  <span className=\"font-medium text-foreground\">{comment.author}</span>\n                  <span className=\"text-xs text-muted-foreground\">\n                    {formatDate(comment.createdAt)}\n                  </span>\n                </div>\n                <p className=\"text-foreground/90 whitespace-pre-wrap\">{comment.content}</p>\n              </div>\n            </div>\n          ))\n        )}\n      </div>\n    </section>\n  )\n}\n"],"names":[],"mappings":";;;;;AAIA;AACA;AAAA;AACA;AACA;AACA;AACA;AAAA;AAAA;;;AATA;;;;;;;AAgBA,MAAM,UAAU,CAAC,MAAgB,MAAM,KAAK,IAAI,CAAC,CAAA,MAAO,IAAI,IAAI;AAEhE,6BAA6B;AAC7B,SAAS,WAAW,IAAqB;IACvC,MAAM,UAAU,OAAO,SAAS,WAAW,IAAI,KAAK,QAAQ,IAAI,KAAK;IACrE,OAAO,QAAQ,kBAAkB,CAAC,SAAS;QACzC,MAAM;QACN,OAAO;QACP,KAAK;IACP;AACF;AAEO,SAAS,gBAAgB,EAAE,MAAM,EAAwB;;IAC9D,MAAM,EAAE,MAAM,QAAQ,EAAE,SAAS,EAAE,GAAG,IAAA,kPAAM,EAC1C,CAAC,mBAAmB,EAAE,QAAQ,EAC9B;IAGF,MAAM,CAAC,QAAQ,UAAU,GAAG,IAAA,ySAAQ,EAAC;IACrC,MAAM,CAAC,SAAS,WAAW,GAAG,IAAA,ySAAQ,EAAC;IACvC,MAAM,CAAC,cAAc,gBAAgB,GAAG,IAAA,ySAAQ,EAAC;IACjD,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,ySAAQ,EAAC;IAEnC,MAAM,eAAe,OAAO;QAC1B,EAAE,cAAc;QAChB,IAAI,CAAC,OAAO,IAAI,MAAM,CAAC,QAAQ,IAAI,IAAI;YACrC,SAAS;YACT;QACF;QAEA,gBAAgB;QAChB,SAAS;QAET,IAAI;YACF,MAAM,MAAM,MAAM,MAAM,CAAC,aAAa,CAAC,EAAE;gBACvC,QAAQ;gBACR,SAAS;oBAAE,gBAAgB;gBAAmB;gBAC9C,MAAM,KAAK,SAAS,CAAC;oBAAE,QAAQ,OAAO,IAAI;oBAAI,SAAS,QAAQ,IAAI;oBAAI;gBAAO;YAChF;YAEA,IAAI,CAAC,IAAI,EAAE,EAAE;gBACX,MAAM,OAAO,MAAM,IAAI,IAAI;gBAC3B,MAAM,IAAI,MAAM,KAAK,KAAK,IAAI;YAChC;YAEA,SAAS;YACT,IAAA,mSAAM,EAAC,CAAC,mBAAmB,EAAE,QAAQ;YACrC,WAAW;QACb,EAAE,OAAO,KAAK;YACZ,SAAS,eAAe,QAAQ,IAAI,OAAO,GAAG;QAChD,SAAU;YACR,gBAAgB;QAClB;IACF;IAEA,qBACE,6TAAC;QAAQ,WAAU;;0BACjB,6TAAC;gBAAI,WAAU;;kCACb,6TAAC,gUAAa;wBAAC,WAAU;;;;;;kCACzB,6TAAC;wBAAG,WAAU;;4BAAwC;4BAC/C,UAAU,UAAU;4BAAE;;;;;;;;;;;;;0BAK/B,6TAAC;gBAAK,UAAU;gBAAc,WAAU;0BACtC,cAAA,6TAAC;oBAAI,WAAU;;sCACb,6TAAC;4BAAI,WAAU;sCACb,cAAA,6TAAC;gCAAI,WAAU;0CACb,cAAA,6TAAC,iSAAI;oCAAC,WAAU;;;;;;;;;;;;;;;;sCAGpB,6TAAC;4BAAI,WAAU;;8CACb,6TAAC,6IAAK;oCACJ,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,UAAU,EAAE,MAAM,CAAC,KAAK;oCACzC,WAAW;oCACX,WAAU;;;;;;8CAEZ,6TAAC,mJAAQ;oCACP,aAAY;oCACZ,OAAO;oCACP,UAAU,CAAC,IAAM,WAAW,EAAE,MAAM,CAAC,KAAK;oCAC1C,WAAW;oCACX,MAAM;oCACN,WAAU;;;;;;gCAEX,uBACC,6TAAC;oCAAE,WAAU;8CAAwB;;;;;;8CAEvC,6TAAC,+IAAM;oCACL,MAAK;oCACL,UAAU,gBAAgB,CAAC,OAAO,IAAI,MAAM,CAAC,QAAQ,IAAI;oCACzD,WAAU;;sDAEV,6TAAC,iSAAI;4CAAC,WAAU;;;;;;wCACf,eAAe,WAAW;;;;;;;;;;;;;;;;;;;;;;;;0BAOnC,6TAAC;gBAAI,WAAU;0BACZ,0BACC,6TAAC;oBAAI,WAAU;8BACZ;wBAAC;wBAAG;qBAAE,CAAC,GAAG,CAAC,CAAA,kBACV,6TAAC;4BAAY,WAAU;;8CACrB,6TAAC;oCAAI,WAAU;;;;;;8CACf,6TAAC;oCAAI,WAAU;;sDACb,6TAAC;4CAAI,WAAU;;;;;;sDACf,6TAAC;4CAAI,WAAU;;;;;;sDACf,6TAAC;4CAAI,WAAU;;;;;;;;;;;;;2BALT;;;;;;;;;2BAUZ,UAAU,WAAW,kBACvB,6TAAC;oBAAI,WAAU;;sCACb,6TAAC,gUAAa;4BAAC,WAAU;;;;;;sCACzB,6TAAC;sCAAE;;;;;;;;;;;2BAGL,UAAU,IAAI,CAAA,wBACZ,6TAAC;wBAAqB,WAAU;;0CAC9B,6TAAC;gCAAI,WAAU;0CACb,cAAA,6TAAC;oCAAI,WAAU;8CACb,cAAA,6TAAC;wCAAK,WAAU;kDACb,QAAQ,MAAM,CAAC,MAAM,CAAC,GAAG,WAAW;;;;;;;;;;;;;;;;0CAI3C,6TAAC;gCAAI,WAAU;;kDACb,6TAAC;wCAAI,WAAU;;0DACb,6TAAC;gDAAK,WAAU;0DAA+B,QAAQ,MAAM;;;;;;0DAC7D,6TAAC;gDAAK,WAAU;0DACb,WAAW,QAAQ,SAAS;;;;;;;;;;;;kDAGjC,6TAAC;wCAAE,WAAU;kDAA0C,QAAQ,OAAO;;;;;;;;;;;;;uBAfhE,QAAQ,EAAE;;;;;;;;;;;;;;;;AAuBhC;GAxIgB;;QACwB,kPAAM;;;KAD9B"}},
    {"offset": {"line": 843, "column": 0}, "map": {"version":3,"sources":["file:///Users/zyj/%E4%BB%A3%E7%A0%81%E6%96%87%E4%BB%B6%E5%A4%B9/%E6%88%91%E7%9A%84%E4%BB%A3%E7%A0%81/blog/my-blog/web/components/view-counter.tsx"],"sourcesContent":["/*\n * @Author: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git\n * @Date: 2026-01-27 21:09:46\n * @LastEditors: error: error: git config user.name & please set dead value or install git && error: git config user.email & please set dead value or install git & please set dead value or install git\n * @LastEditTime: 2026-01-27 21:10:01\n * @FilePath: /blog/my-next-app/components/view-counter.tsx\n * @Description: 这是默认设置,请设置`customMade`, 打开koroFileHeader查看配置 进行设置: https://github.com/OBKoro1/koro1FileHeader/wiki/%E9%85%8D%E7%BD%AE\n */\n\"use client\"\n\nimport { useEffect, useState } from \"react\"\nimport { Eye } from \"lucide-react\"\n\ninterface ViewCounterProps {\n  postId: string\n  initialViews: number\n}\n\nexport function ViewCounter({ postId, initialViews }: ViewCounterProps) {\n  const [views, setViews] = useState(initialViews)\n\n  useEffect(() => {\n    // 增加浏览次数\n    fetch(`/api/posts/${postId}/views`, { method: \"POST\" })\n      .then(res => res.json())\n      .then(data => setViews(data.views))\n      .catch(console.error)\n  }, [postId])\n\n  return (\n    <span className=\"flex items-center gap-1.5 text-muted-foreground\">\n      <Eye className=\"h-4 w-4\" />\n      <span>{views} 次浏览</span>\n    </span>\n  )\n}\n"],"names":[],"mappings":"AAAA;;;;;;;CAOC;;;;;AAGD;AACA;;;AAHA;;;AAUO,SAAS,YAAY,EAAE,MAAM,EAAE,YAAY,EAAoB;;IACpE,MAAM,CAAC,OAAO,SAAS,GAAG,IAAA,ySAAQ,EAAC;IAEnC,IAAA,0SAAS;iCAAC;YACR,SAAS;YACT,MAAM,CAAC,WAAW,EAAE,OAAO,MAAM,CAAC,EAAE;gBAAE,QAAQ;YAAO,GAClD,IAAI;yCAAC,CAAA,MAAO,IAAI,IAAI;wCACpB,IAAI;yCAAC,CAAA,OAAQ,SAAS,KAAK,KAAK;wCAChC,KAAK,CAAC,QAAQ,KAAK;QACxB;gCAAG;QAAC;KAAO;IAEX,qBACE,6TAAC;QAAK,WAAU;;0BACd,6TAAC,8RAAG;gBAAC,WAAU;;;;;;0BACf,6TAAC;;oBAAM;oBAAM;;;;;;;;;;;;;AAGnB;GAjBgB;KAAA"}}]
}